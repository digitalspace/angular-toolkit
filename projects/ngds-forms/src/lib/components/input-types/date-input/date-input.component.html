<!-- Header -->
<ngds-input-header #inputHeader [label]="label" [subLabel]="subLabel" [control]="control"></ngds-input-header>

<!-- Date input -->
<div class="d-flex position-relative">
  <!-- Input wrapper -->
  <div class="input-group border rounded-3 d-flex align-items-center dropdown" [ngClass]="getInputClasses()" #dropdown>

    <!-- Prepended content -->
    <ng-content #inputPrepend select="[ngdsInputPrepend]"></ng-content>

    <!-- Input display control value-->
    <button class="form-control border-0 text-start rounded-3" style="margin-left: 1px" type="button"   data-bs-toggle="dropdown"
      data-bs-auto-close="outside" [ngClass]="{'is-invalid': isInvalid, 'text-muted': !control?.value }"
      [disabled]="isDisabled" style="min-height:2.25rem;" [value]="control?.value">
      {{ currentDisplay || placeholder }}
      <!-- Calendar dropdowns -->
    </button>

    <span [hidden]="inline" class="dropdown-menu inline-dropdown" #dropdownMenu>
      <ng-container *ngTemplateOutlet="calendarTemplate">
      </ng-container>
    </span>

    <!-- Reset control button -->
    <button *ngIf="resetButton" type="button" aria-label="reset input" class="btn btn-inline border-0 focus-highlight"
      [disabled]="isDisabled" (click)="control?.reset()"><i class="bi bi-x-lg"></i></button>

    <!-- Appended content -->
    <ng-content #inputAppend select="[ngdsInputAppend]"></ng-content>

  </div>

  <!-- Overlay content -->
  <ngds-input-overlay #inputOverlay [loading]="isLoading"></ngds-input-overlay>
</div>

<!-- Footer -->
<ngds-input-footer #inputFooter [control]="control" [invalid]="isInvalid && !hideInvalidState"></ngds-input-footer>

<!-- Calendar inline -->
<div *ngIf="inline">
  <ng-container *ngTemplateOutlet="calendarTemplate">
  </ng-container>
</div>

<!-- Calendar template -->
<ng-template #calendarTemplate>
  <ngds-calendar-manager [disabled]="isDisabled" (dateChange)="handleDateChange($event)" [control]="control"
    (clearDates)="handleClearDates()" (displayChange)="handleDisplayChange()" [timezone]="timezone"
    [disabledDatesFn]="disabledDatesFn.bind(this)" [dateRange]="dateRange" [minDisplayDepth]="minMode"
    [maxRange]="maxRange" [selectedDate]="selectedDate.value" [selectedEndDate]="selectedEndDate.value"
    [allowDisabledInRange]="allowDisabledInRange">
  </ngds-calendar-manager>
</ng-template>